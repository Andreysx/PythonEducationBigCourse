# 3. Pickle
# –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤—ã—à–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã. –û–Ω–∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫
# –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —è–∑—ã–∫—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ê —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ –ø–æ–Ω—è—Ç—å —Ñ–∞–π–ª
# —Å–º–æ–∂–µ—Ç –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫. –û–¥–Ω–∞–∫–æ —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö Python –Ω–µ –≤—Å–µ–≥–¥–∞
# –≤–æ–∑–º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ CSV –∏–ª–∏ JSON –æ–±—ä–µ–∫—Ç–µ.
# Python –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–æ–¥—É–ª—å pickle –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–æ–∏—Ö
# —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ –ø–æ—Ç–æ–∫ –±–∞–π—Ç. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è,
# –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Python. –ù–æ –¥–∞–Ω–Ω—ã–µ –æ–∫–∞–∂—É—Ç—Å—è –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º–∏, –µ—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ
# –∏—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—Ä—É–≥–∏–º –Ø–ü.
# üî• –ö—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ! –ú–æ–¥—É–ª—å pickle –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ—Ç–æ–∫–∞ –±–∞–π—Ç –Ω–∞
# –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–æ–π. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ —Å —Ç–µ–º –Ω–∞–±–æ—Ä–æ–º –±–∞–π—Ç,
# –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –º–æ–∂–µ—Ç–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.
#
# import pickle
# res = pickle.loads(b"cos\nsystem\n(S'echo Hello world!'\ntR.")
# print(res)
#
# –í —ç—Ç–æ–º –±–µ–∑–æ–±–∏–¥–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –º–æ–¥—É–ª—å –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—ã–≤–µ–ª —Å–æ–æ–±—â–µ–Ω–∏–µ
# ‚Äú–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!‚Äù –ø—Ä–µ–∂–¥–µ —á–µ–º –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –±–∞–π—Ç –≤ —á–∏—Å–ª–æ –Ω–æ–ª—å.
# –î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
# –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
# –ú–æ–¥—É–ª—å pickle –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Python:
#     ‚óè None, True –∏ False;
#     ‚óè int, float, complex;
#     ‚óè str, bytes, bytearrays;
#     ‚óè tuple, list, set, dict –µ—Å–ª–∏ –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–±—ä–µ–∫—Ç—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ pickle;
#     ‚óè –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑
#     –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –º–æ–¥—É–ª—è, –∫—Ä–æ–º–µ lambda —Ñ—É–Ω–∫—Ü–∏–π;
#     ‚óè –∫–ª–∞—Å—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –º–æ–¥—É–ª—è;
#     ‚óè —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤, –µ—Å–ª–∏ pickle —Å–º–æ–≥ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏—Ö –¥–∞–Ω–¥–µ—Ä __dict__ –∏–ª–∏
#     —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ __getstate__().
#
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å Python —Å—Ç—Ä—É–∫—Ç—É—Ä.
#
# –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
# –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å–ª–æ–≤–∞—Ä—å –∏–∑ –≥–ª–∞–≤—ã –ø—Ä–æ JSON –≤ –Ω–∞–±–æ—Ä –±–∞–π—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –º–æ–¥—É–ª—è pickle.
#
# import pickle
#
# my_dict = {
# "first_name": "–î–∂–æ–Ω",
# "last_name": "–°–º–∏—Ç",
# "hobbies": ["–∫—É–∑–Ω–µ—á–Ω–æ–µ –¥–µ–ª–æ", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
# "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è"],
# "age": 35,
# "children": [
# {
# "first_name": "–ê–ª–∏—Å–∞",
# "age": 5
# },
# {
# "first_name": "–ú–∞—Ä—É—Å—è",
# "age": 3
# }
# ]
# }
# print(my_dict)
# res = pickle.dumps(my_dict, protocol=pickle.DEFAULT_PROTOCOL)
# print(f'{res = }')
#
# –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é dumps –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—Å–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ —Å—Ç—Ä–æ–∫—É –±–∞–π—Ç.
# –û—Ç–¥–µ–ª—å–Ω–æ —É–∫–∞–∑–∞–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ú–æ–¥—É–ª—å pickle –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ
# –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏.
# –°–µ–π—á–∞—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è 4. –û–Ω–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ Python 3.4, –∞
# —Å—Ç–∞–ª–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º —Å Python 3.8. –ï—Å–ª–∏ –≤—ã –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
# —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞, –º–æ–∂–Ω–æ —Å–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ç–≤—ë—Ä—Ç—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.
# –ü–æ–ø—Ä–æ–±—É–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç—ã, –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ JSON –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª.
#
# import pickle
# def func(a, b, c):
#     return a + b + c
#
# my_dict = {
# "numbers": [42, 4.1415, 7+3j],
# "functions": (func, sum, max),
# "others": {True, False, 'Hello world!'},
# }
#
# with open('my_dict.pickle', 'wb') as f:
#     pickle.dump(my_dict, f)
#
# –§—É–Ω–∫—Ü–∏—è dump –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –æ–±—ä–µ–∫—Ç –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ñ–∞–π–ª–æ–≤—ã–π
# –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä. –ü—Ä–∏ —ç—Ç–æ–º —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –∫–∞–∫ –±–∏–Ω–∞—Ä–Ω—ã–π. –í —Ü–µ–ª–æ–º
# –º—ã –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç –ø–æ—Ç–æ–∫–æ–≤–æ–π –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç
# –º–µ—Ç–æ–¥ write.
# –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –≤ —Å–ª–æ–≤–∞—Ä—å —Ñ—É–Ω–∫—Ü–∏—é func, –∫–æ—Ç–æ—Ä–∞—è
# –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö —Å—É–º–º—É. –ö –Ω–µ–π –º—ã –≤–µ—Ä–Ω–µ–º—Å—è –Ω–∏–∂–µ.
# –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
# –ü—Ä–æ–≤–µ–¥—ë–º –æ–±—Ä–∞—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ù–∞–±–æ—Ä –±–∞–π—Ç –º—ã —É–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏, –∫–æ–≥–¥–∞
# —Ä–∞–∑–±–∏—Ä–∞–ª–∏—Å—å —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö. –£—Ç–æ—á–Ω–∏–º –¥–µ—Ç–∞–ª–∏.
#
# import pickle
# data = b'\x80\x04\x95\xe3\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\nfirst_n
# ame\x94\x8c\x08\xd0\x94\xd0\xb6\xd0\xbe\xd0\xbd\x94\x8c\tlast_nam
# e\x94\x8c\x08\xd0\xa1\xd0\xbc\xd0\xb8\xd1\x82\x94\x8c\x07hobbies\
# x94]\x94(\x8c\x1b\xd0\xba\xd1\x83\xd0\xb7\xd0\xbd\xd0\xb5\xd1\x87
# \xd0\xbd\xd0\xbe\xd0\xb5 \xd0\xb4\xd0\xb5\xd0\xbb\xd0\xbe\x94\x8c
# \xd0\xbf\xd1\x80\xd0\xbe\xd0\xb3\xd1\x80\xd0\xb0\xd0\xbc\xd0\xbc\
# xd0\xb8\xd1\x80\xd0\xbe\xd0\xb2\xd0\xb0\xd0\xbd\xd0\xb8\xd0\xb5\x
# 94\x8c\x16\xd0\xbf\xd1\x83\xd1\x82\xd0\xb5\xd1\x88\xd0\xb5\xd1\x8
# 1\xd1\x82\xd0\xb2\xd0\xb8\xd1\x8f\x94e\x8c\x03age\x94K#\x8c\x08ch
# ildren\x94]\x94(}\x94(h\x01\x8c\n\xd0\x90\xd0\xbb\xd0\xb8\xd1\x81
# \xd0\xb0\x94h\nK\x05u}\x94(h\x01\x8c\x0c\xd0\x9c\xd0\xb0\xd1\x80\
# xd1\x83\xd1\x81\xd1\x8f\x94h\nK\x03ueu.'
# new_dict = pickle.loads(data)
# print(f'{new_dict = }')
#
#
# –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∏–ª–∞ –Ω–∞ –≤—Ö–æ–¥ –Ω–∞–±–æ—Ä –±–∞–π—Ç –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∞ –∏–∑ –Ω–∏—Ö –∏—Å—Ö–æ–¥–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å.
# –£—Ç–æ—á–Ω–∏–º, —á—Ç–æ loads –∏–º–µ–µ—Ç —Ä—è–¥ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: fix_imports=True,
# encoding='ASCII', errors='strict'. –û–Ω–∏ –Ω—É–∂–Ω—ã –¥–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö
# –≤ Python 2. –ê —Ç–∞–∫ –∫–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Ç–æ—Ä–æ–π –≤–µ—Ä—Å–∏–∏ Python –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –≤ 2020 –≥–æ–¥—É, –Ω–µ—Ç
# —Å–º—ã—Å–ª–∞ —Ä–∞–∑–±–∏—Ä–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
#
# –í —Ñ–∏–Ω–∞–ª–µ –∑–∞–≥—Ä—É–∑–∏–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ my_dict.pikle, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª–∏ —Ä–∞–Ω–µ–µ.
# import pickle
#
# def func(a, b, c):
#     return a * b * c
# with open('my_dict.pickle', 'rb') as f:
#     new_dict = pickle.load(f)
# print(f'{new_dict = }')
# print(f'{new_dict["functions"][0](2, 3, 4) = }')
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–æ–≤–∞—Ä—è –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Å—Ö–æ–¥–Ω–æ–º—É. –ù–æ –µ—Å—Ç—å –æ–¥–Ω–æ –Ω–æ. –ü—Ä–∏
# –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ func, –∫–æ—Ç–æ—Ä–∞—è –ª–µ–∂–∏—Ç –≤ –Ω—É–ª–µ–≤–æ–π —è—á–µ–π–∫–µ –∫–æ—Ä—Ç–µ–∂–∞ –ø–æ –∫–ª—é—á—É functions
# –º—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–µ —Å—É–º–º—É —Ç—Ä—ë—Ö —á–∏—Å–µ–ª, –∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ. –í —Ñ–∞–π–ª–µ, –≥–¥–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞
# –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è func, –∫–æ—Ç–æ—Ä–∞—è —É–º–Ω–æ–∂–∞–µ—Ç —á–∏—Å–ª–∞. –ú–æ–¥—É–ª—å pickle —É–∫–∞–∑–∞–ª –≤
# —Å–ª–æ–≤–∞—Ä–µ –µ—ë, –∞ –Ω–µ –∏—Å—Ö–æ–¥–Ω—É—é. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –±—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Å –Ω—É–∂–Ω—ã–º –∏–º–µ–Ω–µ–º –Ω–µ –±—ã–ª–æ,
# –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –±—ã –æ—à–∏–±–∫–æ–π.
